name: "Reliably GH workflow demo"

on:
  push:
    branches:
      - main
    paths:
      - '**.yaml'
      - '**.yml'
    paths-ignore:
      - '.github/*'

jobs:
  demo:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout source code'
        uses: actions/checkout@v2
      - name: 'Checkout OPA policies'
        uses: actions/checkout@v2
        with:
          repository: reliablyhq/opa-policies
          path: policies
      - name: 'Run Reliably'
        uses: reliablyhq/gh-action@main
        with:
          policies: 'policies/kubernetes'
          files: 'manifest.yaml'

name: Reliably GH workflow demo

on:
  push:
    branches:
      - main
    paths:
      - 'manifest.yaml'
      #- '**.yaml'
      #- '**.yml'

jobs:
  basic-usage:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout source code'
        uses: actions/checkout@v2
      - name: 'Run Reliably'
        uses: reliablyhq/gh-action@main
        #continue-on-error: true

  code-scanning-usage:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout source code'
        uses: actions/checkout@v2
      - name: 'Run Reliably'
        uses: reliablyhq/gh-action@main
        continue-on-error: true
        with:
          format: "sarif"
          output: "reliably.sarif"
      - name: Display Reliably SARIF report
        run: |
          cat reliably.sarif
      # - name: Upload result to GitHub Code Scanning
      #   uses: github/codeql-action/upload-sarif@v1
      #   with:
      #     sarif_file: example.sarif
